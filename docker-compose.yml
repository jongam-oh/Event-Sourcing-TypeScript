version: '2.1'
services:
  redis:
    image: redis:alpine

  event-store:
    image: eventstore/eventstore

  models-api:
    image: 12grapes/models-api
    build:
      context: .
      dockerfile: ./docker/Dockerfile-models-api
    links:
      - event-store
      - redis

  commands-api:
    image: 12grapes/commands-api
    build:
      context: .
      dockerfile: ./docker/Dockerfile-commands-api
    links:
      - event-store
      - redis

  counter-eventhandler:
    image: 12grapes/counter-eventhandler
    build:
      context: .
      dockerfile: ./docker/Dockerfile-counter-eventhandler
    links:
      - event-store
      - redis
